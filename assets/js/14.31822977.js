(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{235:function(s,e,n){"use strict";n.r(e);var a=n(0),r=Object(a.a)({},function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"网络管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络管理","aria-hidden":"true"}},[s._v("#")]),s._v(" 网络管理")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"网络模式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#网络模式","aria-hidden":"true"}},[s._v("#")]),s._v(" 网络模式")]),s._v(" "),n("p",[s._v("Docker支持5种网络模式")]),s._v(" "),n("h3",{attrs:{id:"bridge"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bridge","aria-hidden":"true"}},[s._v("#")]),s._v(" bridge")]),s._v(" "),n("p",[s._v("默认网络，Docker启动后默认创建一个docker0网桥，默认创建的容器也是添加到这个网桥中。\n"),n("img",{attrs:{src:"/images/docker/docker26.png",alt:""}}),s._v(" "),n("br")]),s._v(" "),n("h3",{attrs:{id:"host"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#host","aria-hidden":"true"}},[s._v("#")]),s._v(" host")]),s._v(" "),n("p",[s._v("容器不会获得一个独立的network namespace，而是与宿主机共用一个。\n"),n("img",{attrs:{src:"/images/docker/docker27.png",alt:""}}),s._v(" "),n("br")]),s._v(" "),n("h3",{attrs:{id:"none"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#none","aria-hidden":"true"}},[s._v("#")]),s._v(" none")]),s._v(" "),n("p",[s._v("获取独立的network namespace，但不为容器进行任何网络配置。")]),s._v(" "),n("h3",{attrs:{id:"container"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#container","aria-hidden":"true"}},[s._v("#")]),s._v(" container")]),s._v(" "),n("p",[s._v("与指定的容器使用同一个network namespace，网卡配置也都是相同的。\n"),n("img",{attrs:{src:"/images/docker/docker28.png",alt:""}}),s._v(" "),n("br")]),s._v(" "),n("h3",{attrs:{id:"自定义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自定义","aria-hidden":"true"}},[s._v("#")]),s._v(" 自定义")]),s._v(" "),n("p",[s._v("自定义网桥，默认与bridge网络一样。")]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"测试"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#测试","aria-hidden":"true"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),n("h3",{attrs:{id:"安装网桥工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装网桥工具","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装网桥工具")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 搜索bridge软件包\n# yum search bridge\n# 安装\n# yum install bridge-utils\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"bridge网桥验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#bridge网桥验证","aria-hidden":"true"}},[s._v("#")]),s._v(" bridge网桥验证")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[root@host106 ~]# brctl show\nbridge name\tbridge id\t\tSTP enabled\tinterfaces\nbr-7277ccd7a44b\t\t8000.0242908b37f3\tno\t\tveth8478bd4\n\t\t\t\t\t\t\tvethe055ca9\ndocker0\t\t8000.02426da48c6a\tno\t\n\n[root@host106 ~]# docker network ls\nNETWORK ID          NAME                DRIVER              SCOPE\n4a1d8f21debf        bridge              bridge              local\n0c09f7631f77        host                host                local\n7277ccd7a44b        lnmp                bridge              local\n91eae8f2586f        none                null                local\n\n# 从上面可以看到我们创建lnmp站点时，创建了一个网桥7277ccd7a44b，然后它连接了\nveth8478bd4 和 vethe055ca9，分别是lnmp_web和lnmp_mysql容器中的网卡。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"host网络验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#host网络验证","aria-hidden":"true"}},[s._v("#")]),s._v(" host网络验证")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 创建配置host网络的容器，镜像使用busybox(这个镜像内部携带ifconfig命令)\n# docker run -itd --name bs1 --net host busybox\n# docker exec -it bs1 sh\n/ # ifconfig\nbr-7277ccd7a44b Link encap:Ethernet  HWaddr 02:42:90:8B:37:F3  \n          inet addr:172.18.0.1  Bcast:172.18.255.255  Mask:255.255.0.0\n          inet6 addr: fe80::42:90ff:fe8b:37f3/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:1681 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:2238 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:5205273 (4.9 MiB)  TX bytes:378324 (369.4 KiB)\n\ndocker0   Link encap:Ethernet  HWaddr 02:42:6D:A4:8C:6A  \n          inet addr:172.17.0.1  Bcast:172.17.255.255  Mask:255.255.0.0\n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\neth0      Link encap:Ethernet  HWaddr 00:0C:29:88:D5:BD  \n          inet addr:192.168.163.106  Bcast:192.168.163.255  Mask:255.255.255.0\n          inet6 addr: fe80::9363:a6cd:22d1:8191/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:437558 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:39538 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:635295355 (605.8 MiB)  TX bytes:10682502 (10.1 MiB)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\nveth8478bd4 Link encap:Ethernet  HWaddr 8E:26:36:91:67:2F  \n          inet6 addr: fe80::8c26:36ff:fe91:672f/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:5185 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:5428 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:6038346 (5.7 MiB)  TX bytes:2269946 (2.1 MiB)\n\nvethe055ca9 Link encap:Ethernet  HWaddr 2A:21:E5:90:56:A9  \n          inet6 addr: fe80::2821:e5ff:fe90:56a9/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:3215 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:3541 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:1893970 (1.8 MiB)  TX bytes:812759 (793.7 KiB)\n          \n# 在容器内部ifconfig命令打印了宿主机的所有网络信息，这说明当前容器使用的是宿主机的host\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br")])]),n("h3",{attrs:{id:"none网络验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#none网络验证","aria-hidden":"true"}},[s._v("#")]),s._v(" none网络验证")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 创建配置none网络的容器，镜像使用busybox(这个镜像内部携带ifconfig命令)\n# docker run -itd --name bs2 --net none busybox\n# docker exec -it bs2 sh\n/ # ifconfig\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])])])},[],!1,null,null,null);e.default=r.exports}}]);